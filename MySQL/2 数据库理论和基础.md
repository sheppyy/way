# 1 数据库基础

## 1.1 什么是数据库

- 数据库：是一个以某种有组织的方式存储的数据集合。
- 数据库：是“按照数据结构来组织、存储和管理数据的仓库”，是一个长期存储在计算机内的、有组织的、可共享的、统一管理的大量数据的集合。



## 1.2 表

- 表：是一种结构化的文件，可用来存储某种特定类型的数据。
- 表：是某种特定类型数据的结构化清单。



注意：

```
1. 每一个表都有一个名字，且名字在同一个数据库中唯一。
```

模式：关于数据库和表的布局及特性的信息。



## 1.3 列和数据类型

- 列：表中的一个字段，所有表都由一个或多个列组成。

- 数据类型：允许存储数据的类型，每个列都有相应的数据类型，用于限制该列存储的数据类型。

注意：

```
1. 列中存储着表中某部分的信息内容。
2. 
```



## 1.4 行

- 行：表中的一个记录，一天数据
- 表中的数据是按行存储的，所保存的每个记录都存储在自己的行内。





## 1.5 主键

- 主键：一列或一组列，能唯一区分表中的每个行。

- 主键：唯一标识表中每行的列或组列



注意：

```
1. 每个表都应该有应该主键
2. 满足主键的条件：
	- 任何两行都不具有相同的主键值
	- 每个行都必须具有主键值（主键列不允许为NULL）
3. 几个好习惯：
	- 不更新主键列中的值
	- 不重用主键列的值
	- 不在主键列中使用可能会改变的值。
```



# 2 MySQL简介

## 2.1 什么是MySQL

- MySQL是一种开放源代码的关系型数据库管理系统（RDBMS），使用最常用的数据库管理语言--结构化查询语言（SQL）进行数据库管理。
- MySQL是一种DBMS，是一种数据库软件。



MySQL的优点：

- 成本低
- 性能高
- 可信赖
- 简单易用



## 2.2 MySQL工具

- mysql命令行
- MySQL Administrator
- MySQL Query Browser





## 2.3 MySQL语句

1. mysql的语句骨架就是这样子，加粗部分顺序一般不能（具体能不能你试试）调，会出错的:apple:。

2. 括号中的数字代表他们被执行的顺序。

   (8)**SELECT** (9)**DISTINCT**
   (11)[TOP_specification] [select_list]
   (1)**FROM** [left_table]
   (3)　[join_type] **JOIN** [right_table]
   (2)　**ON** [join_condition]
   (4)**WHERE** [where_condition]
   (5)**GROUP BY** [group_by_list]
   (6)**WITH** {CUBE | ROLLUP}
   (7)**HAVING** [having_condition]
   (10)**ORDER BY** [order_by_list]





# 3 MySQL的使用

## 3.1 连接

- 命令：mysql -r[用户名] -p[用户密码]

- 在cmd命令行：mysql -uroot -p123455

![msyql connection](D:\Me\Way\MySQL\img\01 msyql connection.jpg)



## 3.2 选择数据库

- 命令：use [数据库名]
- 在mysql命令行：use test;



## 3.2 查看有哪些数据库和表

1. 查看数据库
   - 命令：show databases;
   - 在mysql命令行：show databases;



2. 查看表
   - 命令：show tables;
   - 在mysql命令行：show tables;



3. 查看某张表有哪些字段

   - 命令：show columns from [表名称];

   - 在mysql命令行：show columns from user;

   

4. 查看MySQL服务器状态信息

   - 命令：show status;

   

5. 显示创建特定 **数据库** 的MySQL语句

   - 命令：show create database [数据库名]
   - 在mysql命令行：show create database test;



6. 显示创建特定 **表** 的MySQL语句

   - 命令：show create table [表名]

   - 在mysql命令行：show create table user;



(0 bug，0 error，0 warning是不可能的🐕...)

7. 显示服务器错误或警告信息
   - show errors;
   - show warnings;



# 4 数据检索

1. 数据查询那就是 select 大法了，非常灵活，怎么舒服怎么来。

2. 没有说明，本章节的命令都是在mysql命令行下执行的。



## 4.1 select语句

命令格式：

​	select [字段1],[字段2]... from [表名];



## 4.2 检索多个列

- select name,email from web_userinfo;

![select one row](D:\Me\Way\MySQL\img\02 select many.png)



## 4.3 检索单个列

- select name,email from web_userinfo;

![select one](D:\Me\Way\MySQL\img\03 select one.png)



## 4.4 检索所有列

- select * from web_userinfo;

![04 select all](D:\Me\Way\MySQL\img\04 select all.png)



注意：

```
1. *是应该通配符，即MySQL语句是支持正则表达式的，很猛。
2. select * 一般是自己测试用来看数据，真正开发你得写出你查了什么数据，不然人家不知道你干了什么。当然你硬要这么干也ok(等着互扯头发吧)
3. 
```

## 4.5 对检索的数据去重

- select distinct name,phone,gender,address from user;

![05 select and distinct](D:\Me\Way\MySQL\img\05 select and distinct.png)



注意：

```
1. 两行数据的所有字段都相同时，我们称为，重复的行。
2. distinct是对我们 所查询 的字段进行去重，没有查询的字段不在判断范围。

```



## 4.6 限制结果

1. 获取前n行
   - 命令：select * from user limit [限制的行数];
   - select * from user limit 2;

![06 select limit](D:\Me\Way\MySQL\img\06 select limit.png)



2. 指定从n行开始获取m行结果
   - 命令：select * from user limit [开始的行数], [取出的行数];
   - select * from user limit 2,3;

![07 select limit](D:\Me\Way\MySQL\img\07 select limit.png)



注意：

```
1. limit 2,3; ==> 意为从第二行开始（但是不包括第二行），取3行。
2. limit 2,3; <==> limit 3 offset 2;
3. 当取的行数大于已有行数时，只返回全部行数。
4. limit 1,1; ==> 返回的是第二行。
5. limit子句是很重要的，数据能够分页都依赖于它，分页功能在web开发是必备的，所有得搞定limit，理解好来。

```



## 4.7 完全限定名

完全限定名的作用：

```
1. 因为查询是由多表查询的，而多个表可能会有相同名字的字段，同一个语句使用两个或以上相同的字段名，谁是谁？肯定乱了套啊。
2. 这时候完全限定名就出来了，其相当于绝对路径，避免数据混淆冲突，搞错对象。
```

语法：

```
select [表名.字段名] from [数据库名.表名]
```

- select user.name,user.address from learn.user;

![08 select fully qualified](D:\Me\Way\MySQL\img\08 select fully qualified.png)







# 5 排序

如果不指定排序方式，默认为升序。



## 5.1 单列排序

```
select * from user order by name;
```

![09 order by](D:\Me\Way\MySQL\img\09 order by.png)



## 5.2 多个列参与排序

```
select * from user order by name,address;

说明：
	多个字段排序时，按字段的先后顺序来排序。
	先按第一个字段来排序，如果遇到数据相同的，则按第二字段来排序，以此类推。
```

![10 order by](D:\Me\Way\MySQL\img\10 order by.png)



## 5.3 指定排序方式

- asc：默认的，即升序
- desc：降序

```
select * from user order by id desc;

说明：
	根据回去所有数据，根据id降序排序后返回。
```

![11 order by](D:\Me\Way\MySQL\img\11 order by.png)





# 6 数据筛选



## 6.1 where子句

```
select * from user where name='ydc';
```

![12 where](D:\Me\Way\MySQL\img\12 where.png)



## 6.2 where子句操作符



### 6.2.1 条件匹配



| 操作符  | 说明                     |
| ------- | ------------------------ |
| =       | 等于                     |
| <>      | 不等于                   |
| !=      | 不等于                   |
| <       | 小于                     |
| <=      | 小于等于                 |
| >       | 大于                     |
| >=      | 大于等于                 |
| between | 在两个值之间（得是数值） |



- 示例

```
select * from user where money >= 2;
```

![13 where](D:\Me\Way\MySQL\img\13 where.png)





### 6.2.2 取反

```
select * from user where name != 'ydc';
```

![14 where](D:\Me\Way\MySQL\img\14 where.png)



---

**就执行命令就得结果了，所有下面没啥的就不截图了，哈哈.(偷懒:label:)**



### 6.2.3 范围匹配

```
select * from user where money between 3 and 8;
```





### 6.2.4 空值检查

```
select * from user where address is null;

说明：
	1. 返回地址为空的行。
```





# 7 数据过滤



**数据过滤就是使用各种条件，对数据进行条件筛选。常用的操作符有：in、not、and、or。**



## 7.1 组合where子句



### 7.1.1 and操作符



and就是且，并列的意思，操作符两边的条件都满足时才返回。

```
select * from user where name='ydc' and money<=7;
```



### 7.1.2 or操作符



or，即或，操作符两边的条件满足一个就行。

```
select * from user where name='ydc' or phone='112';

说明：
	1. 即返回name='ydc'和phone='112'的所有行。
```



### 7.1.3 and和or的执行顺序



and和or经常会出现在同一个sql语句，所有得搞清楚他们被执行的顺序。

and的优先级高于or的，所以一般要使用()来改变优先级。



## 7.2 in操作符



in操作符用来指定条件范围，将字段和范围中的所有条件进行匹配。

```
select name,address from user where id in (1,2) order by name;

说明：
	1. 筛选id 为1,2的行
```





## 7.3 not操作符



not操作符用于否定它后面的条件，即取反。

```
select name,address from user where id not in (1,3) order by name;

说明：
	1. 筛选id 不为1,2的所有行
```



# 8 通配符筛选



通配符：用于匹配的特殊字符。

搜索模式：由字面值、通配符或两者组合构成的搜索条件。



## 8.1 like



### 8.1.1 %通配符



%是最常用的通配符，表示任意字符出现任意次数，即0次或多次。

但是%不能匹配NULL。

```
select name from user where name like 'ydc%';

说明：
	1. 筛选出所有ydc或包含ydc的行
	2. 'ydc%'：就是搜索模式
	3. 为了精确匹配，可以使用多个通配符
```



### 8.1.1 _通配符

_只匹配单个字符，即一个字符，要想匹配多个，就得写多个下划线。

```
select name from user where name like 'yd_';
```



## 8.2 通配符使用技巧

通配符可以给我们带来遍历，但是也带来了弊端，因为通配符搜索需要花的时间比较长，所有给出下列技巧：

- 毕业过度使用通配符，如果其他操作符能实现，则使用其他操作符；
- 不要把通配符放在最开头，除非不得已，因为放最开头搜索是最慢的；
- 使用要细心，通配符放错地方，匹配的回来的就不是想要的时间了；



# 9 正则表达式筛选



跟其他的正则表达式差不多。

正则表达式非常灵活，搭配使用可以携程非常复杂，高级的语句（自己要看得懂:dog:）。

虽然好用，但是不能滥用...



## 9.1 mysql 正则表达式



### 9.1.1 基本字符匹配

```
select name,address from user where name regexp 'ydc';

说明：
	1. regexp后面的就是正则表达式
	2. 这里跟啥也没整，就直接全字符匹配
	3. 
```



```
select name,address from user where name regexp '.dc';

说明：
	1. 点（.）是有个特殊字符，可以表示匹配任意一个字符
	2. 
```





注意：

```
1. 正则表达式是不区分大小写的
2. 
```



### 9.1.2 or匹配

很多代码都懒得写了...:jack_o_lantern:，直接复制，开发大部分都这么干...



```
select name,address from user where name regexp 'ydc|jack';

说明：
	1. 获取name为ydc或者jack的所有行
	
```



### 9.1.3 []匹配

[]是另一种形式的or匹配

```
select name from user where name regexp '[abc]';

说明：
	1. 匹配name包含a或b或c的所有行
	2. 
```



```
select name from user where name regexp '[a-z]';

说明：
	1. [a-z]是范围的表示，即26个字母
	2. 数字范围：[0-9]
```





### 9.1.4 匹配特殊字符

需要匹配特殊的特殊字符，就需要对特殊的字符进行转义，消除其特殊的意义。

```
匹配特殊字符:
    \\.
    \\|
    \\[]
    \\\ ---> 就是匹配\本身
    ...
```



| 元字符 | 说明     |
| ------ | -------- |
| \\\f   | 换页     |
| \\\n   | 换行     |
| \\\r   | 回车     |
| \\\t   | 制表     |
| \\\v   | 纵向制表 |



### 9.1.5匹配字符类

字符类是为了方便快速开发，而预定义的。

| 类         | 说明                                               |
| ---------- | -------------------------------------------------- |
| [:alnum:]  | 任意字母和数字，[a-zA-Z0-9]                        |
| [:alpha:]  | 任意字母，[a-zA-Z]                                 |
| [:blank:]  | 空格和制表，[\\\t]                                 |
| [:cntrl:]  | ascii控制字符，ascii的0到31，和127                 |
| [:digit:]  | 任意数字，[0-9]                                    |
| [:graph:]  | 和[:print:]相同，但不包括空格                      |
| [:lower:]  | 任意小写字母，[a-z]                                |
| [:print:]  | 任意可打印字符                                     |
| [:punct:]  | 不在[:alnum:]，又不在[:cntrl:]中的任意字符         |
| [:space:]  | 包括空格在内的任意空白字符，[\\\f\\\n\\\r\\\t\\\v] |
| [:upper:]  | 任意大写字母，[A-Z]                                |
| [:xdigit:] | 任意十六进制数字，[a-fA-F0-9]                      |



```
select name from user where name regexp '[[:digit:]]{2}';

说明：
	1. 匹配name中有两个数字的行
	2. 
```







### 9.1.6 匹配多个实例



| 字符  | 说明                   |
| ----- | ---------------------- |
| *     | 0个或多个匹配          |
| +     | 1个或多个匹配，{1,}    |
| ?     | 0个或1个匹配，{0,1}    |
| {n}   | 指定数目的匹配         |
| {n,}  | 不少于指定数目的匹配   |
| {n,m} | 匹配说明的范围，m<=255 |



```
select name from user where name regexp '\\([0-9]dc?\\)';

说明：
	1. \\( 匹配(
	2. c?  即c可以有，也可以没有
	3. \\) 匹配)
```



### 9.1.7 定位符



定位符可以匹配指定位置的文本。



| 字符    | 说明     |
| ------- | -------- |
| ^       | 文本开始 |
| $       | 文本结尾 |
| [[:<:]] | 词的开始 |
| [[:>:]] | 词的结尾 |



```
select name from user where name regexp '^[0-9\\.]';

说明：
	1. ^[0-9\\.]：以数字或点(.)开头的行
	2. 
```



注意：

1. ^有两种用途：
   - ^[0-9]：以数字开头
   - [^0-9]：除了数字，即非操作
2. regexp匹配的是子串，即使用搜索模式，一个一个来匹配，like是整个串来匹配。
3. 使用^和$，可以使regexp和like有一样的功能。



可以在MySQL终端进行正则表达式测试：

```
select 'ydc' regexp '[0-9]';

说明：
	1. 返回0，因为ydc中没有数字
	2. 
```





# 10 创建计算字段



## 10.1 计算字段





## 10.2 拼接字段



### 10.2.1 拼接

mysql使用Concat()函数对字段进行拼接显示。

```
说明：
	其他DBMS的字段拼接使用+或||实现同样的功能。
```





```
select Concat(name, '(',money,')') from user;
```

![15 concate](D:\Me\Way\MySQL\img\15 concate.png)



注意：

	1. LTrim()和RTim()，可以去掉空格。



### 10.2.2 使用别名



**这里开始，后面都使用列名，而不是字段名，毕竟官方就是这样叫的，专业嘛🐎。**



```
select Concat(name, '(',money,')') as name_money from user;

说明：
	1. 重命名显示列名
	2. 取别名的用途挺多，比如表名或列名不符合命名，冲突等情况，都可以使用
	3. 
```

![16 as name](D:\Me\Way\MySQL\img\16 as name.png)





## 10.3 算术计算













